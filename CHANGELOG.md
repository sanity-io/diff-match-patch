<!-- markdownlint-disable --><!-- textlint-disable -->

# ðŸ““ Changelog

All notable changes to this project will be documented in this file. See
[Conventional Commits](https://conventionalcommits.org) for commit guidelines.

## [4.0.0](https://github.com/sanity-io/diff-match-patch/compare/v3.2.0...v4.0.0) (2025-01-22)


### âš  BREAKING CHANGES

* Generated patches will now also generate _lengths_ that are in UTF-8 lengths, instead of in UCS-2 lengths. This brings it to parity with other unicode-aware libraries.
* The `applyPatches()` method previously allowed passing a unidiff-formatted patch directly. This lead to bugs where the arguments were switched, eg `patches` was passed to `previousValue` argument and vice-versa. With this change, the user has to explicitly parse the patch first using `parsePatch()`, then pass it to `applyPatches()`.
* **apply:** Patches generated by older versions of this library will (on certain unicode texts) no longer apply, as the indicies do not match up cleanly.
* **patch:** Generated indices are now different, meaning patches generated with this change won't apply cleanly in older versions, and vice-versa.
* use constants for diff types instead of typescript enum
* Exports are now optimized to allow more environments to use the module, regardless of them prefering ESM or CJS modules. That potentially changes behavior slightly, thus the breaking change.

### Features

* allow applying text-formatted patches directly ([afcd7a3](https://github.com/sanity-io/diff-match-patch/commit/afcd7a3c4260409d036c3492f4f455ea43c5cceb))
* allow exceeding indices when adjusting ([35dd166](https://github.com/sanity-io/diff-match-patch/commit/35dd1662e24c7a8e163ed4d6af6c56d1d021b320))
* do not allow passing unparsed patch to `applyPatches()` ([299b63b](https://github.com/sanity-io/diff-match-patch/commit/299b63b5dc3584bfd2548676ff33bea8a696367d))
* export `parsePatch` method ([3ecb796](https://github.com/sanity-io/diff-match-patch/commit/3ecb79697fe00e3bf0ee01558b71968a7c1dac42))
* export xIndex, add support for match options ([#6](https://github.com/sanity-io/diff-match-patch/issues/6)) ([91f760a](https://github.com/sanity-io/diff-match-patch/commit/91f760a18043875be2336bcf1ec35a0ef1e99614))
* expose utf-8/ucs-2 adjustment fns as beta ([4b2d163](https://github.com/sanity-io/diff-match-patch/commit/4b2d163b2e6e79088e59c8699309a545a275b0c0))
* modernize build tooling, make cjs/esm compatible, tsdoc ([1618813](https://github.com/sanity-io/diff-match-patch/commit/16188132f08f729c0951ee382433c01877a1d238))
* use constants for diff types instead of typescript enum ([52aca3f](https://github.com/sanity-io/diff-match-patch/commit/52aca3f8abba8d6de65501f32486f03ac0fe2c95))


### Bug Fixes

* add release tag for adjustment options interface ([a742cb9](https://github.com/sanity-io/diff-match-patch/commit/a742cb94e467dab6627e97cae40bdd9cf861ba99))
* **apply:** assume indices are UTF-8 ([82df7d4](https://github.com/sanity-io/diff-match-patch/commit/82df7d4551eb6698fdf77926907ccab53d07411a))
* **ci:** add release-please workflow ([#7](https://github.com/sanity-io/diff-match-patch/issues/7)) ([801d195](https://github.com/sanity-io/diff-match-patch/commit/801d195d74a06229aab4fec8e51abbf529ecc7c8))
* export adjustment options ([ca27926](https://github.com/sanity-io/diff-match-patch/commit/ca279263a6876cffb9803dd3ffe11d0cd496684c))
* generate and parse as utf8 lengths ([a586ec8](https://github.com/sanity-io/diff-match-patch/commit/a586ec88be03fa4bf775462c95c01072763dcb56))
* handle surrogate pairs without crashing ([b283069](https://github.com/sanity-io/diff-match-patch/commit/b2830694973cf96ca5e90235b2e0dd8cacc5d499))
* handle ucs2 adjustment on shorter input string ([06d420a](https://github.com/sanity-io/diff-match-patch/commit/06d420a4a98fa1dab5232b070fcbe0b6369cce6d))
* **patch:** ensure context is not split inside a surrogate pair ([35b4aed](https://github.com/sanity-io/diff-match-patch/commit/35b4aed0d10a2770dc0807c2c9b4e336480991f4))
* **patch:** use utf8 indices instead of ucs2 indices ([6e76fa7](https://github.com/sanity-io/diff-match-patch/commit/6e76fa7ac4e9e6bb465887a727abaa999ae946a4))
* rename d.ts files to match cjs ([616488a](https://github.com/sanity-io/diff-match-patch/commit/616488a7779a1726ae2c7763c6484bcc6c05945f))
* rewrite compiles cjs files to use cjs extension ([6021b09](https://github.com/sanity-io/diff-match-patch/commit/6021b099d2039c5417e5f76d4cd6095d9c352d9a))
* rewrite exports in cjs to also use cjs extension ([a01c379](https://github.com/sanity-io/diff-match-patch/commit/a01c3797f4bde3c644f11b0c23230825637c58d0))
* upgrade build tooling output for better cjs/esm interop ([2eff007](https://github.com/sanity-io/diff-match-patch/commit/2eff0070a8a242340ce24f266f3a88ece3e09866))

## [3.2.0](https://github.com/sanity-io/diff-match-patch/compare/v3.1.2...v3.2.0) (2025-01-22)


### Features

* export xIndex, add support for match options ([#6](https://github.com/sanity-io/diff-match-patch/issues/6)) ([91f760a](https://github.com/sanity-io/diff-match-patch/commit/91f760a18043875be2336bcf1ec35a0ef1e99614))


### Bug Fixes

* **ci:** add release-please workflow ([#7](https://github.com/sanity-io/diff-match-patch/issues/7)) ([801d195](https://github.com/sanity-io/diff-match-patch/commit/801d195d74a06229aab4fec8e51abbf529ecc7c8))

## [3.1.2](https://github.com/sanity-io/diff-match-patch/compare/v3.1.1...v3.1.2) (2024-12-18)

### Bug Fixes

- upgrade build tooling output for better cjs/esm interop ([2eff007](https://github.com/sanity-io/diff-match-patch/commit/2eff0070a8a242340ce24f266f3a88ece3e09866))

## [3.1.1](https://github.com/sanity-io/diff-match-patch/compare/v3.1.0...v3.1.1) (2023-05-11)

### Bug Fixes

- add release tag for adjustment options interface ([a742cb9](https://github.com/sanity-io/diff-match-patch/commit/a742cb94e467dab6627e97cae40bdd9cf861ba99))
- export adjustment options ([ca27926](https://github.com/sanity-io/diff-match-patch/commit/ca279263a6876cffb9803dd3ffe11d0cd496684c))

## [3.1.0](https://github.com/sanity-io/diff-match-patch/compare/v3.0.1...v3.1.0) (2023-05-11)

### Features

- allow exceeding indices when adjusting ([35dd166](https://github.com/sanity-io/diff-match-patch/commit/35dd1662e24c7a8e163ed4d6af6c56d1d021b320))

## [3.0.1](https://github.com/sanity-io/diff-match-patch/compare/v3.0.0...v3.0.1) (2023-05-02)

### Bug Fixes

- handle ucs2 adjustment on shorter input string ([06d420a](https://github.com/sanity-io/diff-match-patch/commit/06d420a4a98fa1dab5232b070fcbe0b6369cce6d))

## [3.0.0](https://github.com/sanity-io/diff-match-patch/compare/v2.1.0...v3.0.0) (2023-04-28)

### âš  BREAKING CHANGES

- Generated patches will now also generate _lengths_ that are in
  UTF-8 lengths, instead of in UCS-2 lengths. This brings it to parity with other
  unicode-aware libraries.

### Bug Fixes

- generate and parse as utf8 lengths ([a586ec8](https://github.com/sanity-io/diff-match-patch/commit/a586ec88be03fa4bf775462c95c01072763dcb56))

## [2.1.0](https://github.com/sanity-io/diff-match-patch/compare/v2.0.0...v2.1.0) (2023-04-25)

### Features

- expose utf-8/ucs-2 adjustment fns as beta ([4b2d163](https://github.com/sanity-io/diff-match-patch/commit/4b2d163b2e6e79088e59c8699309a545a275b0c0))

## [2.0.0](https://github.com/sanity-io/diff-match-patch/compare/v1.0.0...v2.0.0) (2023-04-25)

### âš  BREAKING CHANGES

- The `applyPatches()` method previously allowed passing a
  unidiff-formatted patch directly. This lead to bugs where the arguments were
  switched, eg `patches` was passed to `previousValue` argument and vice-versa.
  With this change, the user has to explicitly parse the patch first using
  `parsePatch()`, then pass it to `applyPatches()`.

### Features

- do not allow passing unparsed patch to `applyPatches()` ([299b63b](https://github.com/sanity-io/diff-match-patch/commit/299b63b5dc3584bfd2548676ff33bea8a696367d))

## [1.0.0](https://github.com/sanity-io/diff-match-patch/compare/v0.0.8...v1.0.0) (2023-04-21)

### âš  BREAKING CHANGES

- **apply:** Patches generated by older versions of this library will (on
  certain unicode texts) no longer apply, as the indicies do not match up cleanly.
- **patch:** Generated indices are now different, meaning patches
  generated with this change won't apply cleanly in older versions, and
  vice-versa.
- use constants for diff types instead of typescript enum
- Exports are now optimized to allow more environments to use the
  module, regardless of them prefering ESM or CJS modules. That potentially
  changes behavior slightly, thus the breaking change.

### Features

- modernize build tooling, make cjs/esm compatible, tsdoc ([1618813](https://github.com/sanity-io/diff-match-patch/commit/16188132f08f729c0951ee382433c01877a1d238))
- use constants for diff types instead of typescript enum ([52aca3f](https://github.com/sanity-io/diff-match-patch/commit/52aca3f8abba8d6de65501f32486f03ac0fe2c95))

### Bug Fixes

- **apply:** assume indices are UTF-8 ([82df7d4](https://github.com/sanity-io/diff-match-patch/commit/82df7d4551eb6698fdf77926907ccab53d07411a))
- **patch:** use utf8 indices instead of ucs2 indices ([6e76fa7](https://github.com/sanity-io/diff-match-patch/commit/6e76fa7ac4e9e6bb465887a727abaa999ae946a4))
